digraph Onboarding {
    rankdir=TB;
    node [fontname="Arial"];
    compound=true;

    start [shape=ellipse, label="Neuer\nMitarbeiter"];

    subgraph cluster_it {
        label="IT";
        style=filled;
        color=lightblue;
        fillcolor="#E8F4FD";

        laptop [shape=box, label="Laptop\nbereitstellen"];
        zugaenge [shape=box, label="ZugÃ¤nge\neinrichten"];
        software [shape=box, label="Software\ninstallieren"];
    }

    subgraph cluster_hr {
        label="HR";
        style=filled;
        color=lightyellow;
        fillcolor="#FFF9E6";

        vertrag [shape=box, label="Vertrag\nfinalisieren"];
        schulungen [shape=box, label="Schulungen\nplanen"];
        willkommen [shape=box, label="Willkommenspaket"];
    }

    subgraph cluster_fachbereich {
        label="Fachbereich";
        style=filled;
        color=lightgreen;
        fillcolor="#E8F5E9";

        einarbeitung [shape=box, label="Einarbeitungsplan\nerstellen"];
        mentor [shape=box, label="Mentor\nzuweisen"];
        aufgaben [shape=box, label="Erste Aufgaben\ndefinieren"];
    }

    // DEFECT: Single bottleneck node â€” all 3 parallel paths
    // must pass through one person before completion
    freigabe [shape=box, label="Teamlead-\nFreigabe", style="filled,bold", fillcolor="#FFCDD2"];
    end [shape=ellipse, label="Onboarding\nabgeschlossen"];

    // Parallel start into 3 lanes
    start -> laptop;
    start -> vertrag;
    start -> einarbeitung;

    // IT path
    laptop -> zugaenge;
    zugaenge -> software;

    // HR path
    vertrag -> schulungen;
    schulungen -> willkommen;

    // Fachbereich path
    einarbeitung -> mentor;
    mentor -> aufgaben;

    // DEFECT: All 3 paths converge on single bottleneck
    software -> freigabe;
    willkommen -> freigabe;
    aufgaben -> freigabe;

    freigabe -> end;
}
